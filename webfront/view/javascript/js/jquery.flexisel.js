!function(a){a.fn.flexisel=function(b){var f,h,l,m,c=a.extend({visibleItems:4,itemsToScroll:3,animationSpeed:400,infinite:!0,navigationTargetSelector:null,autoPlay:{enable:!1,interval:5e3,pauseOnHover:!0},responsiveBreakpoints:{portrait:{changePoint:480,visibleItems:1,itemsToScroll:1},landscape:{changePoint:640,visibleItems:2,itemsToScroll:2},tablet:{changePoint:768,visibleItems:3,itemsToScroll:3}}},b),d=a(this),e=a.extend(c,b),g=!0,i=e.visibleItems,j=e.itemsToScroll,k=[],n={init:function(){return this.each(function(){n.appendHTML(),n.setEventHandlers(),n.initializeItems()})},initializeItems:function(){var b=e.responsiveBreakpoints;for(var c in b)k.push(b[c]);k.sort(function(a,b){return a.changePoint-b.changePoint});var g=d.children();f=n.getCurrentItemWidth(),h=g.length,g.width(f),d.css({left:-f*(i+1)}),d.fadeIn(),a(window).trigger("resize")},appendHTML:function(){if(d.addClass("nbs-flexisel-ul"),d.wrap("<div class='nbs-flexisel-container'><div class='nbs-flexisel-inner'></div></div>"),d.find("li").addClass("nbs-flexisel-item"),e.navigationTargetSelector&&a(e.navigationTargetSelector).length>0?a("<div class='nbs-flexisel-nav-left'></div><div class='nbs-flexisel-nav-right'></div>").appendTo(e.navigationTargetSelector):(e.navigationTargetSelector=d.parent(),a("<div class='nbs-flexisel-nav-left'></div><div class='nbs-flexisel-nav-right'></div>").insertAfter(d)),e.infinite){var b=d.children(),c=b.clone(),f=b.clone();d.prepend(c),d.append(f)}},setEventHandlers:function(){var b=d.children();a(window).on("resize",function(c){clearTimeout(l),l=setTimeout(function(){n.calculateDisplay(),f=n.getCurrentItemWidth(),b.width(f),e.infinite?d.css({left:-f*Math.floor(b.length/2)}):(n.clearDisabled(),a(e.navigationTargetSelector).find(".nbs-flexisel-nav-left").addClass("disabled"),d.css({left:0}))},100)}),a(e.navigationTargetSelector).find(".nbs-flexisel-nav-left").on("click",function(a){n.scroll(!0)}),a(e.navigationTargetSelector).find(".nbs-flexisel-nav-right").on("click",function(a){n.scroll(!1)}),e.autoPlay.enable&&(n.setAutoplayInterval(),e.autoPlay.pauseOnHover===!0&&d.on({mouseenter:function(){g=!1},mouseleave:function(){g=!0}})),d[0].addEventListener("touchstart",n.touchHandler.handleTouchStart,!1),d[0].addEventListener("touchmove",n.touchHandler.handleTouchMove,!1)},calculateDisplay:function(){var b=a("html").width(),c=k[k.length-1].changePoint;for(var d in k){if(b>=c){i=e.visibleItems,j=e.itemsToScroll;break}if(b<k[d].changePoint){i=k[d].visibleItems,j=k[d].itemsToScroll;break}}},scroll:function(a){if("undefined"==typeof a&&(a=!0),1==g){if(g=!1,f=n.getCurrentItemWidth(),e.autoPlay.enable&&clearInterval(m),e.infinite)d.animate({left:a?"+="+f*j:"-="+f*j},e.animationSpeed,function(){g=!0,a?n.offsetItemsToBeginning(j):n.offsetItemsToEnd(j),n.offsetSliderPosition(a)});else{var b=f*j;a?d.animate({left:n.calculateNonInfiniteLeftScroll(b)},e.animationSpeed,function(){g=!0}):d.animate({left:n.calculateNonInfiniteRightScroll(b)},e.animationSpeed,function(){g=!0})}e.autoPlay.enable&&n.setAutoplayInterval()}},touchHandler:{xDown:null,yDown:null,handleTouchStart:function(a){this.xDown=a.touches[0].clientX,this.yDown=a.touches[0].clientY},handleTouchMove:function(a){if(this.xDown&&this.yDown){var b=a.touches[0].clientX,c=a.touches[0].clientY,d=this.xDown-b;this.yDown-c;Math.abs(d)>0&&(d>0?n.scroll(!1):n.scroll(!0)),this.xDown=null,this.yDown=null,g=!0}}},getCurrentItemWidth:function(){return d.parent().width()/i},offsetItemsToBeginning:function(a){"undefined"==typeof a&&(a=1);for(var b=0;b<a;b++)d.children().last().insertBefore(d.children().first())},offsetItemsToEnd:function(a){"undefined"==typeof a&&(a=1);for(var b=0;b<a;b++)d.children().first().insertAfter(d.children().last())},offsetSliderPosition:function(a){var b=parseInt(d.css("left").replace("px",""));a?b-=f*j:b+=f*j,d.css({left:b})},getOffsetPosition:function(){return parseInt(d.css("left").replace("px",""))},calculateNonInfiniteLeftScroll:function(b){return n.clearDisabled(),n.getOffsetPosition()+b>=0?(a(e.navigationTargetSelector).find(".nbs-flexisel-nav-left").addClass("disabled"),0):n.getOffsetPosition()+b},calculateNonInfiniteRightScroll:function(b){n.clearDisabled();var c=h*f-i*f;return n.getOffsetPosition()-b<=-c?(a(e.navigationTargetSelector).find(".nbs-flexisel-nav-right").addClass("disabled"),-c):n.getOffsetPosition()-b},setAutoplayInterval:function(){m=setInterval(function(){g&&n.scroll(!1)},e.autoPlay.interval)},clearDisabled:function(){var b=a(e.navigationTargetSelector);b.find(".nbs-flexisel-nav-left").removeClass("disabled"),b.find(".nbs-flexisel-nav-right").removeClass("disabled")}};return n[b]?n[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error('Method "'+method+'" does not exist in flexisel plugin!'):n.init.apply(this)}}(jQuery);